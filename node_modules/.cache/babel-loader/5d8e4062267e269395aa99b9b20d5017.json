{"ast":null,"code":"import _asyncToGenerator from\"E:/GoIT/Zad dom/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/GoIT/Zad dom/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\GoIT\\\\Zad dom\\\\goit-react-hw-08-phonebook\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useCallback}from'react';import{useSelector}from'react-redux';import ContactForm from'../ContactForm/ContactForm';import ContactList from'../ContactList/ContactList';import myAPI from'../myAPI/myAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Contacts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var token=useSelector(function(state){return state.auth.token;});var fetchContacts=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetchedContacts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!token){_context.next=5;break;}_context.next=3;return myAPI.fetchContacts(token);case 3:fetchedContacts=_context.sent;setContacts(fetchedContacts);case 5:case\"end\":return _context.stop();}}},_callee);})),[token]);useEffect(function(){fetchContacts();},[fetchContacts]);var handleAddContact=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(contactData){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return myAPI.addContact(token,contactData);case 2:_context2.next=4;return fetchContacts();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleAddContact(_x){return _ref2.apply(this,arguments);};}();var handleDeleteContact=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(contactId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return myAPI.deleteContact(token,contactId);case 2:_context3.next=4;return fetchContacts();case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDeleteContact(_x2){return _ref3.apply(this,arguments);};}();var handleEditContact=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(contactId,contactData){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return myAPI.updateContact(token,contactId,contactData);case 2:_context4.next=4;return fetchContacts();case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleEditContact(_x3,_x4){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ContactForm,{onAddContact:handleAddContact}),/*#__PURE__*/_jsx(ContactList,{contacts:contacts,onDeleteContact:handleDeleteContact,onEditContact:handleEditContact})]});}export default Contacts;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useSelector","ContactForm","ContactList","myAPI","jsx","_jsx","jsxs","_jsxs","Contacts","_useState","_useState2","_slicedToArray","contacts","setContacts","token","state","auth","fetchContacts","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchedContacts","wrap","_callee$","_context","prev","next","sent","stop","handleAddContact","_ref2","_callee2","contactData","_callee2$","_context2","addContact","_x","apply","arguments","handleDeleteContact","_ref3","_callee3","contactId","_callee3$","_context3","deleteContact","_x2","handleEditContact","_ref4","_callee4","_callee4$","_context4","updateContact","_x3","_x4","children","onAddContact","onDeleteContact","onEditContact"],"sources":["E:/GoIT/Zad dom/goit-react-hw-08-phonebook/src/components/Contacts/Contacts.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport ContactForm from '../ContactForm/ContactForm';\r\nimport ContactList from '../ContactList/ContactList';\r\nimport myAPI from '../myAPI/myAPI';\r\n\r\nfunction Contacts() {\r\n  const [contacts, setContacts] = useState([]);\r\n  const token = useSelector(state => state.auth.token);\r\n\r\n  const fetchContacts = useCallback(async () => {\r\n    if (token) {\r\n      const fetchedContacts = await myAPI.fetchContacts(token);\r\n      setContacts(fetchedContacts);\r\n    }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    fetchContacts();\r\n  }, [fetchContacts]);\r\n\r\n  const handleAddContact = async contactData => {\r\n    await myAPI.addContact(token, contactData);\r\n    await fetchContacts();\r\n  };\r\n\r\n  const handleDeleteContact = async contactId => {\r\n    await myAPI.deleteContact(token, contactId);\r\n    await fetchContacts();\r\n  };\r\n\r\n  const handleEditContact = async (contactId, contactData) => {\r\n    await myAPI.updateContact(token, contactId, contactData);\r\n    await fetchContacts();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ContactForm onAddContact={handleAddContact} />\r\n      <ContactList\r\n        contacts={contacts}\r\n        onDeleteContact={handleDeleteContact}\r\n        onEditContact={handleEditContact}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Contacts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}