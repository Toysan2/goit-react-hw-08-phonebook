{"ast":null,"code":"import _asyncToGenerator from\"E:/GoIT/Zad dom/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/GoIT/Zad dom/goit-react-hw-08-phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\GoIT\\\\Zad dom\\\\goit-react-hw-08-phonebook\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import ContactForm from'../ContactForm/ContactForm';import ContactList from'../ContactList/ContactList';import myAPI from'../myAPI/myAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Contacts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var token=useSelector(function(state){return state.auth.token;});useEffect(function(){var fetchContacts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetchedContacts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!token){_context.next=5;break;}_context.next=3;return myAPI.fetchContacts(token);case 3:fetchedContacts=_context.sent;setContacts(fetchedContacts);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchContacts(){return _ref.apply(this,arguments);};}();fetchContacts();},[token]);var handleAddContact=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newContactData){var addedContact,updatedContacts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!token){_context2.next=9;break;}_context2.next=3;return myAPI.addContact(newContactData,token);case 3:addedContact=_context2.sent;if(!addedContact){_context2.next=9;break;}_context2.next=7;return myAPI.fetchContacts(token);case 7:updatedContacts=_context2.sent;setContacts(updatedContacts);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleAddContact(_x){return _ref2.apply(this,arguments);};}();var handleDeleteContact=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(contactId){var updatedContacts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!token){_context3.next=7;break;}_context3.next=3;return myAPI.deleteContact(contactId,token);case 3:_context3.next=5;return myAPI.fetchContacts(token);case 5:updatedContacts=_context3.sent;setContacts(updatedContacts);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDeleteContact(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ContactForm,{onAddContact:handleAddContact}),/*#__PURE__*/_jsx(ContactList,{contacts:contacts,onDeleteContact:handleDeleteContact})]});}export default Contacts;","map":{"version":3,"names":["React","useState","useEffect","useSelector","ContactForm","ContactList","myAPI","jsx","_jsx","jsxs","_jsxs","Contacts","_useState","_useState2","_slicedToArray","contacts","setContacts","token","state","auth","fetchContacts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchedContacts","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","handleAddContact","_ref2","_callee2","newContactData","addedContact","updatedContacts","_callee2$","_context2","addContact","_x","handleDeleteContact","_ref3","_callee3","contactId","_callee3$","_context3","deleteContact","_x2","children","onAddContact","onDeleteContact"],"sources":["E:/GoIT/Zad dom/goit-react-hw-08-phonebook/src/components/Contacts/Contacts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport ContactForm from '../ContactForm/ContactForm';\r\nimport ContactList from '../ContactList/ContactList';\r\nimport myAPI from '../myAPI/myAPI';\r\n\r\nfunction Contacts() {\r\n  const [contacts, setContacts] = useState([]);\r\n  const token = useSelector(state => state.auth.token);\r\n\r\n  useEffect(() => {\r\n    const fetchContacts = async () => {\r\n      if (token) {\r\n        const fetchedContacts = await myAPI.fetchContacts(token);\r\n        setContacts(fetchedContacts);\r\n      }\r\n    };\r\n    fetchContacts();\r\n  }, [token]);\r\n\r\n  const handleAddContact = async newContactData => {\r\n    if (token) {\r\n      const addedContact = await myAPI.addContact(newContactData, token);\r\n      if (addedContact) {\r\n        const updatedContacts = await myAPI.fetchContacts(token);\r\n        setContacts(updatedContacts);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteContact = async contactId => {\r\n    if (token) {\r\n      await myAPI.deleteContact(contactId, token);\r\n      const updatedContacts = await myAPI.fetchContacts(token);\r\n      setContacts(updatedContacts);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ContactForm onAddContact={handleAddContact} />\r\n      <ContactList contacts={contacts} onDeleteContact={handleDeleteContact} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Contacts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}